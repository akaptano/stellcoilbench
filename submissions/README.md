# Submissions

This directory holds **submission results** generated from running benchmark cases.

## Workflow

1. **Define a case** in `cases/case.yaml` with your benchmark configuration
2. **Run and submit** using:
   ```bash
   stellcoilbench submit-case cases/case.yaml
   ```
   
   GitHub username and hardware are **auto-detected** from your git config and system info.
   
   Optional: Add `--method-name` and `--notes` to store method info in metadata.

3. **Results** are automatically written to `submissions/<surface>/<github_username>/<MM-DD-YYYY_HH-MM>/results.json`

## Directory Structure

```
submissions/
  input.LandremanPaul2021_QA/  # Plasma surface name (from case.yaml)
    akaptano/                   # GitHub username
      12-20-2024_14-30/         # Date and time (MM-DD-YYYY_HH-MM)
        results.json            # Contains metadata + case results with metrics
        case.yaml               # Copy of the case.yaml used to generate this submission
        coils.json              # Optimized coil geometry (JSON format)
        *.vtu, *.vts            # VTK visualization files
      12-20-2024_15-00/         # Another submission from the same user
        results.json
        case.yaml
        coils.json
    another_user/               # Different GitHub user
      12-20-2024_14-00/
        results.json
        case.yaml
        coils.json
  input.muse/                  # Different plasma surface
    akaptano/
      12-20-2024_16-00/
        results.json
        case.yaml
        coils.json
```

Each submission directory is named with the timestamp (to minute accuracy) when it was created.

Each submission directory contains:
- **`results.json`** - Submission results with metadata, case_id, and metrics
- **`case.yaml`** - Copy of the case definition file used to run this submission
- **`coils.json`** - Optimized coil geometry (JSON format, contains coil class objects)
- **`*.vtu`, `*.vts`** - VTK visualization files generated during optimization

## Results.json Format

Each `results.json` file contains:
- `metadata`: Method name, contact, hardware, run date
- `metrics`: Dictionary of optimization metrics

## Case.yaml

The `case.yaml` file is automatically copied from `cases/` when you run `submit-case`. This ensures each submission includes the exact case configuration that was used, making it easy to reproduce or understand what benchmark was run.

The `update-db` command scans this directory for `results.json` files to build the leaderboard.

## Leaderboard

The leaderboard is automatically generated by CI and committed to the `main` branch. 

- **Submissions** (`submissions/`) are committed to the `main` branch
- **Leaderboard files** (`docs/`, `db/`) are committed to the `main` branch
- All files are on the `main` branch
- View the leaderboard by browsing `docs/surfaces.md` on GitHub

