# Submissions

This directory holds **submission results** generated from running benchmark cases.

## Workflow

1. **Define a case** in `cases/case.yaml` with your benchmark configuration
2. **Run and submit** using:
   ```bash
   stellcoilbench submit-case cases/case.yaml
   ```
   
   GitHub username and hardware are **auto-detected** from your git config and system info.
   
   Optional: Add `--method-name` and `--notes` to store method info in metadata.

3. **Results** are automatically written to `submissions/<surface>/<github_username>/<MM-DD-YYYY_HH-MM>.zip`
   - The submission directory is automatically zipped after creation
   - The zip file contains all submission files (results.json, case.yaml, coils.json, VTK files, etc.)

## Directory Structure

```
submissions/
  LandremanPaul2021_QA/  # Plasma surface name (from case.yaml surface_params.surface)
    akaptano/            # GitHub username (auto-detected from git config)
      11-23-2025_23-03.zip  # Date and time (MM-DD-YYYY_HH-MM).zip
        # Contains:
        #   - results.json (metadata + case results with metrics)
        #   - case.yaml (copy of case.yaml with source_case_file field)
        #   - coils.json (optimized coil geometry, JSON format)
        #   - biot_savart_optimized.json (Biot-Savart field data)
        #   - coils_initial.vtu, coils_optimized.vtu (VTK coil files)
        #   - surface_initial.vts, surface_optimized.vts (VTK surface files)
      11-23-2025_23-04.zip  # Another submission from the same user
    another_user/        # Different GitHub user
      11-23-2025_14-00.zip
  MUSE.focus/           # Different plasma surface
    akaptano/
      11-23-2025_23-03.zip
  circular_tokamak/     # Another plasma surface
    akaptano/
      11-23-2025_23-04.zip
```

**Important**: Submissions are automatically zipped into `.zip` files. Each submission zip file is named with the timestamp (to minute accuracy) when it was created.

Each submission zip file contains:
- **`results.json`** - Submission results with metadata and metrics
- **`case.yaml`** - Copy of the case definition file used to run this submission, with `source_case_file` field added (tracks which case file was used)
- **`coils.json`** - Optimized coil geometry (JSON format, contains coil class objects)
- **`biot_savart_optimized.json`** - Biot-Savart field data
- **`*.vtu`, `*.vts`** - VTK visualization files generated during optimization

## Results.json Format

Each `results.json` file contains:
- `metadata`: Method name, contact, hardware, run date
- `metrics`: Dictionary of optimization metrics

## Case.yaml

The `case.yaml` file is automatically copied from `cases/` when you run `submit-case` and stored inside the submission zip file. The `source_case_file` field is added to track which case file was used. This ensures each submission includes the exact case configuration that was used, making it easy to reproduce or understand what benchmark was run.

The `update-db` command scans this directory for `.zip` files and extracts `results.json` from each to build the leaderboard.

## Leaderboard

The leaderboard is automatically generated by CI and committed to the repository. 

- **Submissions** (`submissions/`) are committed to the repository
- **Leaderboard files** (`docs/`) are committed to the repository
- All files are tracked in git
- View the leaderboard by browsing `docs/leaderboards/` on GitHub

