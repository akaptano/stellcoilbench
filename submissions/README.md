# Submissions

This directory holds **submission results** generated from running benchmark cases.

## Workflow

1. **Define a case** in `cases/case.yaml` with your benchmark configuration
2. **Run and submit** using:
   ```bash
   stellcoilbench submit-case cases/case.yaml
   ```
   
   GitHub username and hardware are **auto-detected** from your git config and system info.
   
   Optional: Add `--method-name` and `--notes` to store method info in metadata.

3. **Results** are automatically written to `submissions/<surface>/<github_username>/<MM-DD-YYYY_HH-MM>/results.json`

## Directory Structure

```
submissions/
  LandremanPaul2021_QA/  # Plasma surface name (from case.yaml surface_params.surface)
    akaptano/            # GitHub username (auto-detected from git config)
      11-23-2025_23-03/  # Date and time (MM-DD-YYYY_HH-MM)
        results.json            # Contains metadata + case results with metrics
        case.yaml               # Copy of the case.yaml used to generate this submission
        coils.json              # Optimized coil geometry (JSON format)
        biot_savart_optimized.json  # Biot-Savart field data
        coils_initial.vtu       # Initial coil geometry (VTK)
        coils_optimized.vtu     # Optimized coil geometry (VTK)
        surface_initial.vts     # Initial surface (VTK)
        surface_optimized.vts   # Optimized surface (VTK)
      11-23-2025_23-04/  # Another submission from the same user
        results.json
        case.yaml
        coils.json
        ...
    another_user/        # Different GitHub user
      11-23-2025_14-00/
        results.json
        case.yaml
        coils.json
        ...
  MUSE.focus/           # Different plasma surface
    akaptano/
      11-23-2025_23-03/
        results.json
        case.yaml
        coils.json
        ...
  circular_tokamak/     # Another plasma surface
    akaptano/
      11-23-2025_23-04/
        results.json
        case.yaml
        coils.json
        ...
```

Each submission directory is named with the timestamp (to minute accuracy) when it was created.

Each submission directory contains:
- **`results.json`** - Submission results with metadata, case_id, and metrics
- **`case.yaml`** - Copy of the case definition file used to run this submission
- **`coils.json`** - Optimized coil geometry (JSON format, contains coil class objects)
- **`*.vtu`, `*.vts`** - VTK visualization files generated during optimization

## Results.json Format

Each `results.json` file contains:
- `metadata`: Method name, contact, hardware, run date
- `metrics`: Dictionary of optimization metrics

## Case.yaml

The `case.yaml` file is automatically copied from `cases/` when you run `submit-case`. This ensures each submission includes the exact case configuration that was used, making it easy to reproduce or understand what benchmark was run.

The `update-db` command scans this directory for `results.json` files to build the leaderboard.

## Leaderboard

The leaderboard is automatically generated by CI and committed to the repository. 

- **Submissions** (`submissions/`) are committed to the repository
- **Leaderboard files** (`docs/`, `db/`) are committed to the repository
- All files are tracked in git
- View the leaderboard by browsing `docs/surfaces.md` on GitHub

